
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../reference/">
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Concepts and Design - ADP API Client Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#concepts-and-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ADP API Client Docs" class="md-header__button md-logo" aria-label="ADP API Client Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ADP API Client Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Concepts and Design
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ADP API Client Docs" class="md-nav__button md-logo" aria-label="ADP API Client Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ADP API Client Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADP API Docs
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How-To Guides
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Concepts and Design
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Concepts and Design
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authentication-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication Flow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#credential-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Credential Loading
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call_endpoint-vs-call_rest_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        call_endpoint vs call_rest_endpoint
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parallel-batch-requests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parallel Batch Requests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parallel Batch Requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-threads" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why threads?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#token-safety" class="md-nav__link">
    <span class="md-ellipsis">
      
        Token safety
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance characteristics
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odata-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        OData Filtering
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression" class="md-nav__link">
    <span class="md-ellipsis">
      
        FilterExpression
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.__and__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __and__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.__invert__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __invert__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.__or__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __or__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.field" class="md-nav__link">
    <span class="md-ellipsis">
      
        field
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.from_string" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_string
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.to_odata" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_odata
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#token-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Token Lifecycle
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.logger.configure_logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        configure_logging
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Session Management
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.sessions.ApiSession" class="md-nav__link">
    <span class="md-ellipsis">
      
        ApiSession
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authentication-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication Flow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Process
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#credential-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Credential Loading
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call_endpoint-vs-call_rest_endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        call_endpoint vs call_rest_endpoint
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parallel-batch-requests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parallel Batch Requests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parallel Batch Requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-threads" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why threads?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#token-safety" class="md-nav__link">
    <span class="md-ellipsis">
      
        Token safety
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance characteristics
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#odata-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        OData Filtering
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression" class="md-nav__link">
    <span class="md-ellipsis">
      
        FilterExpression
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.__and__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __and__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.__invert__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __invert__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.__or__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __or__
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.field" class="md-nav__link">
    <span class="md-ellipsis">
      
        field
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.from_string" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_string
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.odata_filters.FilterExpression.to_odata" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_odata
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#token-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Token Lifecycle
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.logger.configure_logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        configure_logging
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Session Management
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adpapi.sessions.ApiSession" class="md-nav__link">
    <span class="md-ellipsis">
      
        ApiSession
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="concepts-and-design">Concepts and Design</h1>
<h2 id="authentication-flow">Authentication Flow</h2>
<p>The ADP API Client uses the OAuth 2.0 Client Credentials flow with certificate-based authentication. This flow is designed for server-to-server communication where the application acts on its own behalf.</p>
<h3 id="process">Process</h3>
<ol>
<li>The client presents its credentials (client ID and secret) along with client certificate</li>
<li>The ADP authentication service validates the certificate and credentials</li>
<li>An access token is issued with a specific validity period</li>
<li>The client uses this token to make API requests</li>
<li>When the token approaches expiration, it's automatically refreshed</li>
</ol>
<h2 id="credential-loading">Credential Loading</h2>
<p>The <code>AdpCredentials</code> object holds all API credentials, and supports loading from environment variables</p>
<pre><code class="language-python">from dotenv import load_dotenv
from adpapi.client import AdpCredentials

creds = AdpCredentials.from_env()
</code></pre>
<blockquote>
<p><em>NOTE</em>: <code>.from_env</code> expects the following environment variables
- <code>CLIENT_ID</code> and <code>CLIENT_SECRET</code>, mandatory, link to the API project
- <code>CERT_PATH</code> and <code>KEY_PATH</code>, optional, default to <code>certificate.pem</code> and <code>adp.key</code>, respectively if not provided</p>
</blockquote>
<h2 id="call_endpoint-vs-call_rest_endpoint"><code>call_endpoint</code> vs <code>call_rest_endpoint</code></h2>
<p>The client exposes two methods that serve different purposes:</p>
<p><strong><code>call_endpoint</code></strong> — for paginated OData endpoints. Use this when you want to list or search records. It automatically handles <code>$top</code>/<code>$skip</code> pagination and supports <code>$select</code> and <code>$filter</code> query parameters.</p>
<p><strong><code>call_rest_endpoint</code></strong> — for direct resource lookups. Use this when you already know the resource identifier and want to fetch it by ID. It supports path parameter templates (e.g. <code>/hr/v2/workers/{associateOID}</code>) and can batch-fetch a list of IDs in a single call.</p>
<h2 id="parallel-batch-requests">Parallel Batch Requests</h2>
<p><code>call_rest_endpoint</code> supports concurrent fetching through the <code>max_workers</code> parameter. Under the hood, this uses Python's <code>concurrent.futures.ThreadPoolExecutor</code> to dispatch multiple HTTP requests simultaneously.</p>
<h3 id="why-threads">Why threads?</h3>
<p>API calls are I/O-bound (most time is spent waiting for network responses), so Python's threading model works well here despite the GIL. Each thread simply waits for its own HTTP response, allowing many requests to be in-flight at once.</p>
<h3 id="token-safety">Token safety</h3>
<p>Before dispatching the thread pool, <code>call_rest_endpoint</code> calls <code>_ensure_valid_token()</code> once. This guarantees that all threads share the same fresh token and avoids race conditions from multiple threads trying to refresh simultaneously.</p>
<h3 id="performance-characteristics">Performance characteristics</h3>
<p>Benchmarks with real ADP API calls show:</p>
<table>
<thead>
<tr>
<th>Workers</th>
<th>10 IDs</th>
<th>50 IDs</th>
</tr>
</thead>
<tbody>
<tr>
<td>1 (sequential)</td>
<td>~11s</td>
<td>~44s</td>
</tr>
<tr>
<td>10 (parallel)</td>
<td>~4s</td>
<td>~8s</td>
</tr>
</tbody>
</table>
<p>Scaling beyond 10 workers typically offers diminishing returns because the bottleneck shifts to ADP server processing time and rate limits.</p>
<h2 id="odata-filtering">OData Filtering</h2>
<p>The ADP API uses OData query syntax for filtering results. The <code>FilterExpression</code> class provides a Pythonic way to build these filters:</p>


<div class="doc doc-object doc-class">



<a id="adpapi.odata_filters.FilterExpression"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="adpapi.odata_filters.Expr">Expr</span></code></p>



        <p>Public API for creating and managing OData filter expressions.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="adpapi.odata_filters.FilterExpression._node">_node</span></code></td>
            <td>
                  <code><span title="adpapi.odata_filters.Expr">Expr</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The internal AST node representing the expression.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Build filters programmatically:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">FilterExpression</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s1">&#39;firstName&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">to_odata</span><span class="p">()</span>
<span class="go">&quot;(firstName eq &#39;John&#39;)&quot;</span>
</code></pre></div>
    <p>Combine with logical operators:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">FilterExpression</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span> <span class="o">=</span> <span class="n">FilterExpression</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s1">&#39;Active&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">combined</span> <span class="o">=</span> <span class="n">f1</span> <span class="o">&amp;</span> <span class="n">f2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">combined</span><span class="o">.</span><span class="n">to_odata</span><span class="p">()</span>
<span class="go">&quot;((age gt 18) and (status eq &#39;Active&#39;))&quot;</span>
</code></pre></div>
    <p>Parse existing OData filter strings:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">FilterExpression</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s2">&quot;firstName eq &#39;John&#39;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">to_odata</span><span class="p">()</span>
<span class="go">&quot;(firstName eq &#39;John&#39;)&quot;</span>
</code></pre></div>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/adpapi/odata_filters.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FilterExpression</span><span class="p">(</span><span class="n">Expr</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Public API for creating and managing OData filter expressions.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        _node (Expr): The internal AST node representing the expression.</span>

<span class="sd">    Examples:</span>
<span class="sd">        Build filters programmatically:</span>
<span class="sd">        &gt;&gt;&gt; f = FilterExpression.field(&#39;firstName&#39;).eq(&#39;John&#39;)</span>
<span class="sd">        &gt;&gt;&gt; f.to_odata()</span>
<span class="sd">        &quot;(firstName eq &#39;John&#39;)&quot;</span>

<span class="sd">        Combine with logical operators:</span>
<span class="sd">        &gt;&gt;&gt; f1 = FilterExpression.field(&#39;age&#39;).gt(18)</span>
<span class="sd">        &gt;&gt;&gt; f2 = FilterExpression.field(&#39;status&#39;).eq(&#39;Active&#39;)</span>
<span class="sd">        &gt;&gt;&gt; combined = f1 &amp; f2</span>
<span class="sd">        &gt;&gt;&gt; combined.to_odata()</span>
<span class="sd">        &quot;((age gt 18) and (status eq &#39;Active&#39;))&quot;</span>

<span class="sd">        Parse existing OData filter strings:</span>
<span class="sd">        &gt;&gt;&gt; f = FilterExpression.from_string(&quot;firstName eq &#39;John&#39;&quot;)</span>
<span class="sd">        &gt;&gt;&gt; f.to_odata()</span>
<span class="sd">        &quot;(firstName eq &#39;John&#39;)&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Expr</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a FilterExpression with an AST node.</span>

<span class="sd">        Args:</span>
<span class="sd">            node: An Expr AST node representing the filter expression.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_node</span> <span class="o">=</span> <span class="n">node</span>

    <span class="c1"># façade pass-through</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_odata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert this filter expression to an OData v4 filter string.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The complete OData filter string ready for use in API requests.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; FilterExpression.field(&#39;status&#39;).eq(&#39;Active&#39;).to_odata()</span>
<span class="sd">            &quot;(status eq &#39;Active&#39;)&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">to_odata</span><span class="p">()</span>

    <span class="c1"># convenience constructors</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">field</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Field</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a field reference for building filter conditions.</span>

<span class="sd">        This is the primary entry point for building filters. The returned Field</span>
<span class="sd">        object provides a fluent API with comparison and string function methods.</span>

<span class="sd">        Args:</span>
<span class="sd">            path (str): Dot-separated field path (e.g., &#39;worker.person.firstName&#39;).</span>
<span class="sd">                       Supports nested properties accessible through the API.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Field: A Field object with methods for building conditions.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; f = FilterExpression.field(&#39;lastName&#39;)</span>
<span class="sd">            &gt;&gt;&gt; f = f.eq(&#39;Smith&#39;)</span>
<span class="sd">            &gt;&gt;&gt; f.to_odata()</span>
<span class="sd">            &quot;(lastName eq &#39;Smith&#39;)&quot;</span>

<span class="sd">        Commonly used field paths:</span>
<span class="sd">            - &#39;worker.firstName&#39; - Worker&#39;s first name</span>
<span class="sd">            - &#39;worker.lastName&#39; - Worker&#39;s last name</span>
<span class="sd">            - &#39;hireDate&#39; - Date of hire</span>
<span class="sd">            - &#39;department&#39; - Department assignment</span>
<span class="sd">            - &#39;salary&#39; - Salary information</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Field</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="c1"># parse a limited OData subset into an AST</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_string</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FilterExpression&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parse an OData filter string into a FilterExpression.</span>

<span class="sd">        This parser supports a subset of OData v4 filter syntax, including:</span>
<span class="sd">        - Comparison operators: eq, ne, gt, ge, lt, le</span>
<span class="sd">        - Logical operators: and, or, not</span>
<span class="sd">        - Boolean operators with parentheses for grouping</span>
<span class="sd">        - String functions: contains(), startswith(), endswith()</span>
<span class="sd">        - Literal values: strings, numbers, booleans, null</span>
<span class="sd">        - Field paths with dot notation</span>

<span class="sd">        Args:</span>
<span class="sd">            s (str): An OData filter string to parse.</span>

<span class="sd">        Returns:</span>
<span class="sd">            FilterExpression: A parsed and structured filter expression.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the filter string has syntax errors or uses unsupported</span>
<span class="sd">                       OData features.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; f = FilterExpression.from_string(</span>
<span class="sd">            ...     &quot;(firstName eq &#39;John&#39;) and (lastName eq &#39;Doe&#39;)&quot;</span>
<span class="sd">            ... )</span>
<span class="sd">            &gt;&gt;&gt; f.to_odata()</span>
<span class="sd">            &quot;((firstName eq &#39;John&#39;) and (lastName eq &#39;Doe&#39;))&quot;</span>

<span class="sd">            Parse a string function:</span>
<span class="sd">            &gt;&gt;&gt; f = FilterExpression.from_string(</span>
<span class="sd">            ...     &quot;contains(email, &#39;@company.com&#39;)&quot;</span>
<span class="sd">            ... )</span>
<span class="sd">            &gt;&gt;&gt; f.to_odata()</span>
<span class="sd">            &quot;contains(email, &#39;@company.com&#39;)&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">_FilterParser</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">FilterExpression</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="c1"># combinators keep returning FilterExpression</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FilterExpression&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combine this expression with another using logical AND.</span>

<span class="sd">        Args:</span>
<span class="sd">            other: Another FilterExpression or Expr to combine with AND.</span>

<span class="sd">        Returns:</span>
<span class="sd">            FilterExpression: A new combined filter expression.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; expr1 = FilterExpression.field(&#39;age&#39;).gt(18)</span>
<span class="sd">            &gt;&gt;&gt; expr2 = FilterExpression.field(&#39;status&#39;).eq(&#39;Active&#39;)</span>
<span class="sd">            &gt;&gt;&gt; combined = expr1 &amp; expr2</span>
<span class="sd">            &gt;&gt;&gt; combined.to_odata()</span>
<span class="sd">            &quot;((age gt 18) and (status eq &#39;Active&#39;))&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FilterExpression</span><span class="p">(</span><span class="n">BinaryOp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="p">,</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="n">_unwrap</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FilterExpression&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Combine this expression with another using logical OR.</span>

<span class="sd">        Args:</span>
<span class="sd">            other: Another FilterExpression or Expr to combine with OR.</span>

<span class="sd">        Returns:</span>
<span class="sd">            FilterExpression: A new combined filter expression.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; expr1 = FilterExpression.field(&#39;status&#39;).eq(&#39;Active&#39;)</span>
<span class="sd">            &gt;&gt;&gt; expr2 = FilterExpression.field(&#39;status&#39;).eq(&#39;Pending&#39;)</span>
<span class="sd">            &gt;&gt;&gt; combined = expr1 | expr2</span>
<span class="sd">            &gt;&gt;&gt; combined.to_odata()</span>
<span class="sd">            &quot;((status eq &#39;Active&#39;) or (status eq &#39;Pending&#39;))&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FilterExpression</span><span class="p">(</span><span class="n">BinaryOp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">,</span> <span class="n">_unwrap</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FilterExpression&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invert this expression using logical NOT.</span>

<span class="sd">        Returns:</span>
<span class="sd">            FilterExpression: A new inverted filter expression.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; expr = FilterExpression.field(&#39;isTerminated&#39;).eq(True)</span>
<span class="sd">            &gt;&gt;&gt; inverted = ~expr</span>
<span class="sd">            &gt;&gt;&gt; inverted.to_odata()</span>
<span class="sd">            &quot;(not (isTerminated eq true))&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">FilterExpression</span><span class="p">(</span><span class="n">UnaryOp</span><span class="p">(</span><span class="s2">&quot;not&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h2 id="adpapi.odata_filters.FilterExpression.__and__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__and__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Combine this expression with another using logical AND.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>other</code>
            </td>
            <td>
                  <code><span title="adpapi.odata_filters.Expr">Expr</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Another FilterExpression or Expr to combine with AND.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>FilterExpression</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="adpapi.odata_filters.FilterExpression" href="#adpapi.odata_filters.FilterExpression">FilterExpression</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new combined filter expression.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>expr1 = FilterExpression.field('age').gt(18)
expr2 = FilterExpression.field('status').eq('Active')
combined = expr1 &amp; expr2
combined.to_odata()
"((age gt 18) and (status eq 'Active'))"</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/adpapi/odata_filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FilterExpression&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Combine this expression with another using logical AND.</span>

<span class="sd">    Args:</span>
<span class="sd">        other: Another FilterExpression or Expr to combine with AND.</span>

<span class="sd">    Returns:</span>
<span class="sd">        FilterExpression: A new combined filter expression.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; expr1 = FilterExpression.field(&#39;age&#39;).gt(18)</span>
<span class="sd">        &gt;&gt;&gt; expr2 = FilterExpression.field(&#39;status&#39;).eq(&#39;Active&#39;)</span>
<span class="sd">        &gt;&gt;&gt; combined = expr1 &amp; expr2</span>
<span class="sd">        &gt;&gt;&gt; combined.to_odata()</span>
<span class="sd">        &quot;((age gt 18) and (status eq &#39;Active&#39;))&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FilterExpression</span><span class="p">(</span><span class="n">BinaryOp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="p">,</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="n">_unwrap</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="adpapi.odata_filters.FilterExpression.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">node</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Initialize a FilterExpression with an AST node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="adpapi.odata_filters.Expr">Expr</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An Expr AST node representing the filter expression.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/adpapi/odata_filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Expr</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a FilterExpression with an AST node.</span>

<span class="sd">    Args:</span>
<span class="sd">        node: An Expr AST node representing the filter expression.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_node</span> <span class="o">=</span> <span class="n">node</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="adpapi.odata_filters.FilterExpression.__invert__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__invert__</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Invert this expression using logical NOT.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>FilterExpression</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="adpapi.odata_filters.FilterExpression" href="#adpapi.odata_filters.FilterExpression">FilterExpression</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new inverted filter expression.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>expr = FilterExpression.field('isTerminated').eq(True)
inverted = ~expr
inverted.to_odata()
"(not (isTerminated eq true))"</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/adpapi/odata_filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FilterExpression&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Invert this expression using logical NOT.</span>

<span class="sd">    Returns:</span>
<span class="sd">        FilterExpression: A new inverted filter expression.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; expr = FilterExpression.field(&#39;isTerminated&#39;).eq(True)</span>
<span class="sd">        &gt;&gt;&gt; inverted = ~expr</span>
<span class="sd">        &gt;&gt;&gt; inverted.to_odata()</span>
<span class="sd">        &quot;(not (isTerminated eq true))&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FilterExpression</span><span class="p">(</span><span class="n">UnaryOp</span><span class="p">(</span><span class="s2">&quot;not&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="adpapi.odata_filters.FilterExpression.__or__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__or__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Combine this expression with another using logical OR.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>other</code>
            </td>
            <td>
                  <code><span title="adpapi.odata_filters.Expr">Expr</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Another FilterExpression or Expr to combine with OR.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>FilterExpression</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="adpapi.odata_filters.FilterExpression" href="#adpapi.odata_filters.FilterExpression">FilterExpression</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new combined filter expression.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>expr1 = FilterExpression.field('status').eq('Active')
expr2 = FilterExpression.field('status').eq('Pending')
combined = expr1 | expr2
combined.to_odata()
"((status eq 'Active') or (status eq 'Pending'))"</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/adpapi/odata_filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FilterExpression&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Combine this expression with another using logical OR.</span>

<span class="sd">    Args:</span>
<span class="sd">        other: Another FilterExpression or Expr to combine with OR.</span>

<span class="sd">    Returns:</span>
<span class="sd">        FilterExpression: A new combined filter expression.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; expr1 = FilterExpression.field(&#39;status&#39;).eq(&#39;Active&#39;)</span>
<span class="sd">        &gt;&gt;&gt; expr2 = FilterExpression.field(&#39;status&#39;).eq(&#39;Pending&#39;)</span>
<span class="sd">        &gt;&gt;&gt; combined = expr1 | expr2</span>
<span class="sd">        &gt;&gt;&gt; combined.to_odata()</span>
<span class="sd">        &quot;((status eq &#39;Active&#39;) or (status eq &#39;Pending&#39;))&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">FilterExpression</span><span class="p">(</span><span class="n">BinaryOp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">,</span> <span class="n">_unwrap</span><span class="p">(</span><span class="n">other</span><span class="p">)))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="adpapi.odata_filters.FilterExpression.field" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">field</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Create a field reference for building filter conditions.</p>
<p>This is the primary entry point for building filters. The returned Field
object provides a fluent API with comparison and string function methods.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dot-separated field path (e.g., 'worker.person.firstName').
       Supports nested properties accessible through the API.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Field</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="adpapi.odata_filters.Field" href="../reference/#adpapi.odata_filters.Field">Field</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A Field object with methods for building conditions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>f = FilterExpression.field('lastName')
f = f.eq('Smith')
f.to_odata()
"(lastName eq 'Smith')"</p>
</blockquote>
</blockquote>
</blockquote>
</details>

<details class="commonly-used-field-paths" open>
  <summary>Commonly used field paths</summary>
  <ul>
<li>'worker.firstName' - Worker's first name</li>
<li>'worker.lastName' - Worker's last name</li>
<li>'hireDate' - Date of hire</li>
<li>'department' - Department assignment</li>
<li>'salary' - Salary information</li>
</ul>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/adpapi/odata_filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">field</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Field</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a field reference for building filter conditions.</span>

<span class="sd">    This is the primary entry point for building filters. The returned Field</span>
<span class="sd">    object provides a fluent API with comparison and string function methods.</span>

<span class="sd">    Args:</span>
<span class="sd">        path (str): Dot-separated field path (e.g., &#39;worker.person.firstName&#39;).</span>
<span class="sd">                   Supports nested properties accessible through the API.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Field: A Field object with methods for building conditions.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; f = FilterExpression.field(&#39;lastName&#39;)</span>
<span class="sd">        &gt;&gt;&gt; f = f.eq(&#39;Smith&#39;)</span>
<span class="sd">        &gt;&gt;&gt; f.to_odata()</span>
<span class="sd">        &quot;(lastName eq &#39;Smith&#39;)&quot;</span>

<span class="sd">    Commonly used field paths:</span>
<span class="sd">        - &#39;worker.firstName&#39; - Worker&#39;s first name</span>
<span class="sd">        - &#39;worker.lastName&#39; - Worker&#39;s last name</span>
<span class="sd">        - &#39;hireDate&#39; - Date of hire</span>
<span class="sd">        - &#39;department&#39; - Department assignment</span>
<span class="sd">        - &#39;salary&#39; - Salary information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Field</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="adpapi.odata_filters.FilterExpression.from_string" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_string</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Parse an OData filter string into a FilterExpression.</p>
<p>This parser supports a subset of OData v4 filter syntax, including:
- Comparison operators: eq, ne, gt, ge, lt, le
- Logical operators: and, or, not
- Boolean operators with parentheses for grouping
- String functions: contains(), startswith(), endswith()
- Literal values: strings, numbers, booleans, null
- Field paths with dot notation</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>s</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An OData filter string to parse.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>FilterExpression</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="adpapi.odata_filters.FilterExpression" href="#adpapi.odata_filters.FilterExpression">FilterExpression</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A parsed and structured filter expression.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the filter string has syntax errors or uses unsupported
       OData features.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>f = FilterExpression.from_string(
...     "(firstName eq 'John') and (lastName eq 'Doe')"
... )
f.to_odata()
"((firstName eq 'John') and (lastName eq 'Doe'))"</p>
</blockquote>
</blockquote>
</blockquote>
<p>Parse a string function:</p>
<blockquote>
<blockquote>
<blockquote>
<p>f = FilterExpression.from_string(
...     "contains(email, '@company.com')"
... )
f.to_odata()
"contains(email, '@company.com')"</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/adpapi/odata_filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_string</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FilterExpression&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse an OData filter string into a FilterExpression.</span>

<span class="sd">    This parser supports a subset of OData v4 filter syntax, including:</span>
<span class="sd">    - Comparison operators: eq, ne, gt, ge, lt, le</span>
<span class="sd">    - Logical operators: and, or, not</span>
<span class="sd">    - Boolean operators with parentheses for grouping</span>
<span class="sd">    - String functions: contains(), startswith(), endswith()</span>
<span class="sd">    - Literal values: strings, numbers, booleans, null</span>
<span class="sd">    - Field paths with dot notation</span>

<span class="sd">    Args:</span>
<span class="sd">        s (str): An OData filter string to parse.</span>

<span class="sd">    Returns:</span>
<span class="sd">        FilterExpression: A parsed and structured filter expression.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the filter string has syntax errors or uses unsupported</span>
<span class="sd">                   OData features.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; f = FilterExpression.from_string(</span>
<span class="sd">        ...     &quot;(firstName eq &#39;John&#39;) and (lastName eq &#39;Doe&#39;)&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; f.to_odata()</span>
<span class="sd">        &quot;((firstName eq &#39;John&#39;) and (lastName eq &#39;Doe&#39;))&quot;</span>

<span class="sd">        Parse a string function:</span>
<span class="sd">        &gt;&gt;&gt; f = FilterExpression.from_string(</span>
<span class="sd">        ...     &quot;contains(email, &#39;@company.com&#39;)&quot;</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; f.to_odata()</span>
<span class="sd">        &quot;contains(email, &#39;@company.com&#39;)&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">_FilterParser</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">FilterExpression</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="adpapi.odata_filters.FilterExpression.to_odata" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_odata</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Convert this filter expression to an OData v4 filter string.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The complete OData filter string ready for use in API requests.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>FilterExpression.field('status').eq('Active').to_odata()
"(status eq 'Active')"</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/adpapi/odata_filters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_odata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert this filter expression to an OData v4 filter string.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The complete OData filter string ready for use in API requests.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; FilterExpression.field(&#39;status&#39;).eq(&#39;Active&#39;).to_odata()</span>
<span class="sd">        &quot;(status eq &#39;Active&#39;)&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node</span><span class="o">.</span><span class="n">to_odata</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="token-lifecycle">Token Lifecycle</h2>
<p>The client automatically manages token refresh. It tracks token expiration and refreshes the token with a 5-minute buffer before actual expiration to prevent failed requests.</p>
<h2 id="error-handling">Error Handling</h2>
<p>The client includes built-in retry logic for transient failures using exponential backoff. This helps handle temporary network issues gracefully.</p>
<h2 id="logging">Logging</h2>
<p>Comprehensive logging is available at multiple levels (DEBUG, INFO, WARNING, ERROR) to help with troubleshooting:</p>


<div class="doc doc-object doc-function">



<a id="adpapi.logger.configure_logging"></a>
    <div class="doc doc-contents first">


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/adpapi/logger.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">configure_logging</span><span class="p">():</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;adpapi&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

    <span class="n">formatter</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> - </span><span class="si">%(levelname)s</span><span class="s2"> - </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># File handler</span>
    <span class="n">file_handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="s2">&quot;app.log&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
    <span class="n">file_handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
    <span class="n">file_handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">file_handler</span><span class="p">)</span>

    <span class="c1"># Console handler</span>
    <span class="n">console_handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
    <span class="n">console_handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
    <span class="n">console_handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">console_handler</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h2 id="session-management">Session Management</h2>
<p>The <code>ApiSession</code> dataclass manages HTTP sessions, retry logic, and authentication headers. It encapsulates:</p>
<ul>
<li>A <code>requests.Session</code> object for connection pooling</li>
<li>Client certificate information for SSL/TLS authentication</li>
<li>A callback function for dynamic header generation (useful for token refresh)</li>
<li>Request timeout handling</li>
</ul>


<div class="doc doc-object doc-class">



<a id="adpapi.sessions.ApiSession"></a>
    <div class="doc doc-contents first">










              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/adpapi/sessions.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ApiSession</span><span class="p">:</span>
    <span class="n">session</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span>
    <span class="n">cert</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="n">get_headers</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">dict</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">headers</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">params</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Default to empty header generation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">params</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_request_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n">RequestMethod</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
        <span class="k">match</span> <span class="n">method</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="n">GET</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span>
            <span class="k">case</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="n">POST</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">post</span>
            <span class="k">case</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="n">PUT</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">put</span>
            <span class="k">case</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="n">DELETE</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span>

        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported method </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n">RequestMethod</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute HTTP request with specified method, headers, params, and optional data.</span>

<span class="sd">        Args:</span>
<span class="sd">            url: The request URL</span>
<span class="sd">            method: HTTP method (GET, POST, PUT, DELETE)</span>

<span class="sd">        Returns:</span>
<span class="sd">            requests.Response object</span>

<span class="sd">        Raises:</span>
<span class="sd">            requests.RequestException: If request fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">request_fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_request_function</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
        <span class="c1"># Generate headers on call time for up-to-date token</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="n">headers</span><span class="p">,</span>
            <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span>
            <span class="s2">&quot;cert&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert</span><span class="p">,</span>
            <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">request_fn</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Request failed for </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2"> request to url: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> with params </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Response Headers: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Response Body: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Error:</span><span class="se">\n</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span>

        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="n">PUT</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="n">DELETE</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>